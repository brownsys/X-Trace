<html>
<head>
<script src="d3.v3.min.js"></script>
<script src="xtrace_utils.js"></script>
<script src="dagre.js"></script>
<script src="xtrace_dagre.js"></script>
<style>
.node rect {
  stroke-width: 1.5px;
  stroke: #333;
  fill: #fff;
}

#node-CLOSED rect {
  stroke-width: 3px;
  fill: #f88;
}

.node text {
  font-family: Verdana;
}

path.edge {
  fill: none;
  stroke-width: 4px;
}

.minimap path.edge {
  stroke-width: 2px;
  stroke: black;
}

.minimap .node rect {
  fill: #ddd;
  stroke-width: 2px;
}
</style>
<svg width=0 height=0>
  <defs>
    <marker id="arrowhead"
            viewBox="0 0 10 10"
            refX="0"
            refY="5"
            markerUnits="strokeWidth"
            markerWidth="4"
            markerHeight="5"
            orient="auto"
            style="fill: #333">
      <path d="M 0 0 L 10 5 L 0 10 z"></path>
    </marker>
  </defs>
</svg>
<script>
window.onload = function() {    
	var callback = function(reports) {
		console.log("Reports received!", reports);
	    var w = document.body.offsetWidth;
	    var h = document.body.offsetHeight;
		drawGraph(reports.reports, w, h);
	};
	var errback = function(message, error) {
		console.log("Error retrieving reports", error);
	};
	getReports(callback, errback);
}
</script>
</head>
<body width="100%" height="100%" style="margin: 0">
    <svg width="100%" height="100%" id="graphattach"></svg>
</body>
</html>